"'Billing Screen' As screen":

    "Gallery1 As gallery.'BrowseLayout_Vertical_TwoTextVariant_ver4.0'":
        BorderColor: =RGBA(118, 0, 0, 1)
        Height: =222
        Items: =Filter('Order Details', 'Order ID' = Value(SelectedOrder.'Order Number'))
        Layout: =Layout.Vertical
        TemplatePadding: =0
        TemplateSize: =28
        Width: =1366
        Y: =45
        ZIndex: =1

        Title2 As label:
            Height: =25
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =15
            Text: =ThisItem.'Menu Item'.Name
            VerticalAlign: =VerticalAlign.Top
            Width: =310
            X: =32
            ZIndex: =1

        lblPrice As label:
            Height: =25
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =12
            Text: |-
                =Text(ThisItem.'Menu Item'.Price, "$##.#0")
            VerticalAlign: =VerticalAlign.Top
            Width: =81
            X: =1053
            Y: =4
            ZIndex: =2

        Separator5 As rectangle:
            Height: =1
            OnSelect: =Select(Parent)
            Width: =Parent.TemplateWidth
            Y: =Parent.TemplateHeight - 1
            ZIndex: =4

    btnBPay As button:
        Height: =48
        OnSelect: |
            =UpdateContext({BackgroundBlurVisble: true});
            UpdateContext({PTWindowVisible: true}); // PT = Payment Type
            UpdateContext({tipVal: 0});
            Patch(Orders, LookUp(Orders, 'Order Number' = SelectedOrder.'Order Number'), {Tip: Value(txtTipAmtInput.Text)});
        Text: ="Pay"
        Width: =184
        X: =948
        Y: =526
        ZIndex: =2

    txtBTotal As label:
        Text: |-
            ="Total: " & Text(SelectedOrder.'Grand Total',"$##.#0")
        X: =948
        Y: =486
        ZIndex: =3

    txtBTip As label:
        Text: |-
            ="Tip: " & Text(Value(txtTipAmtInput.Text), "$#0.#00")
        X: =948
        Y: =446
        ZIndex: =4

    txtBTax As label:
        Text: |-
            ="Tax: " & Text(SelectedOrder.Tax,"$##.#0")
        X: =948
        Y: =406
        ZIndex: =5

    txtBSubtotal As label:
        Text: |-
            ="Subtotal: " & Text(SelectedOrder.'Base Total',"$##.#0")
        X: =948
        Y: =366
        ZIndex: =6

    LightOutbg As rectangle:
        Fill: =RGBA(153, 153, 153, 0.7)
        Height: =248
        OnSelect: =
        Visible: =BackgroundBlurVisble
        Width: =1366
        ZIndex: =7

    Label4 As label:
        Align: =Align.Center
        Fill: =RGBA(216, 59, 1, 1)
        FontWeight: =FontWeight.Bold
        Height: =45
        Size: =23
        Text: |-
            ="Order # " & Text(SelectedOrder.'Order Number')
        Width: =1366
        ZIndex: =8

    Icon1 As icon.ArrowLeft:
        Height: =27
        Icon: =Icon.ArrowLeft
        OnSelect: |-
            =Navigate('Orders List Screen', None);
            Reset(txtTipAmtInput)
        Width: =61
        ZIndex: =9

    Rectangle2 As rectangle:
        Fill: =RGBA(216, 59, 1, 1)
        Height: =45
        Width: =1366
        Y: =723
        ZIndex: =10

    CashCreditWindow As rectangle:
        BorderColor: =RGBA(216, 59, 1, 1)
        BorderThickness: =5
        Fill: =RGBA(255, 255, 255, 1)
        Height: =524
        Visible: =PTWindowVisible
        Width: =480
        X: =452
        Y: =72
        ZIndex: =11

    btnCash As button:
        Height: =66
        OnSelect: |-
            =UpdateContext({PTWindowVisible: false});
            UpdateContext({CashWindowVisible: true});
        Text: ="Cash"
        Visible: =PTWindowVisible
        Width: =181
        X: =485
        Y: =497
        ZIndex: =12

    btnCredit As button:
        Height: =66
        OnSelect: |-
            =UpdateContext({PTWindowVisible: false}); 
            UpdateContext({CreditWindowVisble: true});
        Text: ="Credit"
        Visible: =PTWindowVisible
        Width: =181
        X: =716
        Y: =497
        ZIndex: =13

    Icon2 As icon.Cancel:
        Height: =27
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({PTWindowVisible: false}); 
            UpdateContext({BackgroundBlurVisble: false});
        Visible: =PTWindowVisible
        Width: =32
        X: =897
        Y: =80
        ZIndex: =14

    CreditWindow As rectangle:
        BorderColor: =RGBA(216, 59, 1, 1)
        BorderThickness: =5
        Fill: =RGBA(255, 255, 255, 1)
        Height: =248
        Visible: =CreditWindowVisble
        Width: =480
        X: =443
        Y: =265
        ZIndex: =15

    lblCreditCardNum As label:
        FontWeight: =FontWeight.Bold
        Text: |-
            ="Credit Card #"
        Visible: =CreditWindowVisble
        Width: =139
        X: =461
        Y: =337
        ZIndex: =16

    inputCreditCardNum As text:
        Default: =""
        Format: =TextFormat.Number
        MaxLength: =16
        Visible: =CreditWindowVisble
        Width: =299
        X: =603
        Y: =337
        ZIndex: =17

    btnCreditSubmit As button:
        OnSelect: |+
            =If(Len(inputCreditCardNum.Text) = 16,
            UpdateContext({CreditWindowVisble: false}) & 
            UpdateContext({BackgroundBlurVisble: false}) &
            CheckoutProcess.Run(SelectedOrder.Table.HostTables), // Once submit, change order status to inactive.
            
            UpdateContext({ErrorWindowVisble: true})
            );
            
            // Note: can't seem to add patch function above.
            If(Len(inputCreditCardNum.Text) = 16,
                Patch(
                    Orders, 
                    LookUp(Orders, 'Order Number' = SelectedOrder.'Order Number'), 
                    {
                        Status: 'Status (Orders)'.Inactive
                    }
                )
            );
            
        Text: ="Submit"
        Visible: =CreditWindowVisble
        X: =742
        Y: =439
        ZIndex: =18

    exitCreditWindow As icon.Cancel:
        Height: =24
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({CreditWindowVisble: false});
            UpdateContext({BackgroundBlurVisble: false});
            
            Reset(inputCreditCardNum);
        Visible: =CreditWindowVisble
        Width: =34
        X: =889
        Y: =267
        ZIndex: =19

    ErrorWindow As rectangle:
        BorderColor: =RGBA(216, 59, 1, 1)
        BorderThickness: =5
        Fill: =RGBA(255, 255, 255, 1)
        Height: =123
        Visible: =ErrorWindowVisble
        Width: =339
        X: =513
        Y: =322
        ZIndex: =20

    lblError As label:
        Fill: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Height: =29
        Text: |-
            ="Error: Invalid credit card number"
        Visible: =ErrorWindowVisble
        Width: =322
        X: =522
        Y: =338
        ZIndex: =21

    btnErrorConfirm As button:
        OnSelect: |-
            =UpdateContext({ErrorWindowVisble: false})
        Text: ="Confirm"
        Visible: =ErrorWindowVisble
        X: =603
        Y: =386
        ZIndex: =22

    CashWindow As rectangle:
        BorderColor: =RGBA(216, 59, 1, 1)
        BorderThickness: =5
        Fill: =RGBA(255, 255, 255, 1)
        Height: =248
        Visible: =CashWindowVisible
        Width: =480
        X: =444
        Y: =262
        ZIndex: =23

    lblBalance As label:
        FontWeight: =FontWeight.Bold
        Height: =47
        Text: |-
            ="Balance: " & Text(SelectedOrder.'Grand Total', "$##.00")
        Visible: =CashWindowVisible
        Width: =183
        X: =493
        Y: =303
        ZIndex: =24

    lblCashAmt As label:
        FontWeight: =FontWeight.Bold
        Height: =52
        Text: |-
            ="Cash Amount: " 
        Visible: =CashWindowVisible
        Width: =139
        X: =493
        Y: =347
        ZIndex: =25

    inputCashAmt As text:
        Default: =""
        Format: =TextFormat.Number
        Height: =48
        Visible: =CashWindowVisible
        Width: =192
        X: =648
        Y: =351
        ZIndex: =26

    exitCreditWindow_1 As icon.Cancel:
        Height: =24
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({CashWindowVisible: false});
            Reset(inputCashAmt);
        Visible: =CashWindowVisible
        Width: =34
        X: =891
        Y: =267
        ZIndex: =27

    btnCashSubmit As button:
        OnSelect: |-
            =UpdateContext({CashWindowVisible: false});
            UpdateContext({ChangeWindowVisible: true});
            
            // Once submit, change order status to inactive.
            Patch(
                Orders, 
                LookUp(Orders, 'Order Number' = SelectedOrder.'Order Number'), 
                {
                    Status: 'Status (Orders)'.Inactive
                }
            );
            
            // Runs a cloud flow to change "Availability Status" Column to empty in the "HostTables" Table.
            CheckoutProcess.Run(SelectedOrder.Table.HostTables);
        Text: ="Submit"
        Visible: =CashWindowVisible
        X: =742
        Y: =439
        ZIndex: =28

    ChangeWindow As rectangle:
        BorderColor: =RGBA(216, 59, 1, 1)
        BorderThickness: =5
        Fill: =RGBA(255, 255, 255, 1)
        Height: =179
        Visible: =ChangeWindowVisible
        Width: =220
        X: =582
        Y: =297
        ZIndex: =29

    lblChange As label:
        Align: =Align.Center
        FontWeight: =FontWeight.Semibold
        Height: =63
        Size: =18
        Text: |-
            ="Change: " & Text(inputCashAmt - SelectedOrder.'Grand Total', "$#0.#00)")
        Visible: =ChangeWindowVisible
        Width: =220
        X: =582
        Y: =314
        ZIndex: =30

    btnChange As button:
        OnSelect: |-
            =UpdateContext({ChangeWindowVisible: false});
        Text: ="Confirm"
        Visible: =ChangeWindowVisible
        X: =612
        Y: =391
        ZIndex: =31

    btnBPay_1 As button:
        Height: =48
        OnSelect: =
        Text: ="Discount"
        Width: =184
        X: =61
        Y: =611
        ZIndex: =32

    txtBSubtotal_1 As label:
        Text: |-
            ="Subtotal: " & Text(SelectedOrder.'Base Total',"$##.#0")
        Visible: =PTWindowVisible
        X: =492
        Y: =136
        ZIndex: =33

    txtBTax_1 As label:
        Text: |-
            ="Tax: " & Text(SelectedOrder.Tax,"$##.#0")
        Visible: =PTWindowVisible
        X: =492
        Y: =167
        ZIndex: =34

    txtBTotal_1 As label:
        Text: |-
            ="Total: " & Text(SelectedOrder.'Grand Total',"$##.#0")
        Visible: =PTWindowVisible
        X: =492
        Y: =383
        ZIndex: =36

    txtTipAmtInput As text:
        Default: ="0"
        Format: =TextFormat.Number
        Height: =21
        OnChange: =
        OnSelect: |-
            =UpdateContext({tipCustomSelected: true});
        Visible: =PTWindowVisible
        Width: =101
        X: =587
        Y: =304
        ZIndex: =38

    Button10 As button:
        Height: =23
        OnSelect: |-
            =UpdateContext({tipVal: 10 * SelectedOrder.'Base Total'});
            UpdateContext({tipCustomSelected: false});
            Reset(txtTipAmtInput)
        Text: ="10%"
        Visible: =PTWindowVisible
        Width: =89
        X: =493
        Y: =269
        ZIndex: =39

    Button10_1 As button:
        Height: =23
        OnSelect: |-
            =UpdateContext({tipVal: 15 * SelectedOrder.'Base Total'});
            UpdateContext({tipCustomSelected: false});
            Reset(txtTipAmtInput)
        Text: ="15%"
        Visible: =PTWindowVisible
        Width: =89
        X: =587
        Y: =269
        ZIndex: =40

    Button10_2 As button:
        Height: =23
        OnSelect: |-
            =UpdateContext({tipVal: 20 * SelectedOrder.'Base Total'});
            UpdateContext({tipCustomSelected: false});
            Reset(txtTipAmtInput)
        Text: ="20%"
        Visible: =PTWindowVisible
        Width: =89
        X: =683
        Y: =269
        ZIndex: =41

    Button10_3 As button:
        DisplayMode: =DisplayMode.View
        Height: =23
        Text: ="Custom"
        Visible: =PTWindowVisible
        Width: =89
        X: =492
        Y: =304
        ZIndex: =42

    txtBTip_1 As label:
        Text: |-
            ="Tip: " & Text(Value(txtTipAmtInput.Text), "$#0.#00")
        Visible: =PTWindowVisible
        X: =493
        Y: =227
        ZIndex: =43

